bash - направления изучения

О данном документе
==================

Документ находится в статусе ЧЕРНОВИКА!

Данный документ по смыслу находится где-то между аннотацией и экзаменационными билетами. 
bash - большая программа, далеко не всё в ней нужно знать наизусть. 

Введение
========

## Что такое bash

Баш - это оболочка для работы с ОС Linux (и др.) в диалоговом режиме, т.е. 
позволяющая говорить с ОС примерно как в чате: печатать команды системе и читать её ответы.
Баш позволяет:

* выполнять свои встроенные команды, например, копировать файлы или узнавать текущее время
* запускать программы, установленные в ОС и взаимодействовать с ними в режиме диалога
* запускать сценарии (скрипты), написанные на языке программирования bash

Баш - это программа, которая отвечает за взаимодействие с пользователем при его входе в систему
в большинстве современных версий Linux. 

## Применение bash

* Применение bash в диалоговом режиме очень широкое, например, установка новых программ, запуск служб, работа с файлами
* Сценарии на bash применяются для сборки программ, архивации, запуска тестов и т.п. 

Понятия и факты
=======

Понятия зависят друг от друга, поэтому их не получается расположить по порядку. Если встретилось какое-то непонятное слово, читайте всё до конца - объяснение этого слова должно найтись ниже. 

Основные понятия
----------------
* конольная программа - программа, которая в основном общается с пользователем в диалоговом режиме, получая последовательность букв на входе и выдающая последовательность букв на выходе (при этом она может делать что-то другое, например, получать и передавать информацию через сеть)
* терминальное окно - окно на графическом рабочем столе, где выполняется консольная программа (например, bash)
* команда - последовательность символов, которые мы печатаем, чтобы подать команду. Часто это одна строка и мы подаём команду, нажимая Enter
* история команд - bash помнит предыдущие команды, поэтому их легко запустить повторно
* подсказка - обычно она печатается в начале строки в диалоговом режиме, когда bash или другая консольная прогармма ждёт ввод от пользователя

Процессы
--------
* Процессы можно считать отдельными действующими лицами пьесы, из действий которых складывается поведение данного компьютера под управлением Linux. У каждого процесса есть последовательность команд, которую нужно выполнить, и которая берётся из "исполняемого файла" программы. В ходе своей жизни процесс читает данные из потоков, выполняет вычисления и пишет результаты вычислений в другие потоки (но может делать и многое другое). Процессы выполняются независимо друг от друга, но они могут ждать друг друга, например, если они связаны через потоки ввода-вывода. Формально говоря, процесс - это просто запись в таблице процессов. 
* приостановленный процесс - можно сказать операционной системе, чтобы она приостановила какой-то процесс. В т.ч. это можно сделать в bash
* дочерний процесс - в Linux один процесс может запустить из себя другой процесс так, что система запомнит, кто был инициатором запуска. При этом может быть установлен режим, когда родительский процесс будет остановлен до завершения дочернего процесса, и только после завершения продолжит выполнение. Или же они могут продолжать выполняться одновременно. 
* убийство процесса - в bash доступна команда, которая попытается убить процесс, после чего он прекратится и все занятые им ресурсы будут освобождены и станут доступны для других процессов. 

Потоки
------
* поток - как бы "провод", соединяющий источник данных (например, клавиатуру), и программу, которая читает эти данные (например, bash). Часто по потоку текут буквы. 
Поток отвечает за то, чтобы буквы передавались строго по порядку. Операционная система согласует источник и приёмник данных по времени: если приёмник ждёт данных, а в источнике их нет, то программа, являющаяся приёмником, останавливается и ждёт. 
* стандартные потоки ввода-вывода программы. Их три: стандартный ввод (stdin), стандартный вывод (stdout) и поток ошибок (stderr). При обычном способе запуска программы
из bash стандартный ввод подключается к клавиатуре (мы печатаем данные для программы), а стандартный вывод и поток ошибок подключаются к терминалу (программа печатает свои сообщения на экране). 
* перенаправление потоков ввода-вывода - специальный синтаксис bash, позволяющий управлять подключением стандартных потоков ввода-вывода программы, соединяя их с файлами, или выстраивая программы в цепочку, когда вывод одной программы является вводом другой

Сценарии
--------
* рекурсивный вызов bash - ситуация, когда из bash снова вызван bash как дочерний процесс.
* shebang syntax (с #!/bin/bash) - способ указать, что файл является сценарием. В этом случае, этот файл можно "запустить на выполнение". В результате bash запустится рекурсивно и в нём выполнится последовательность команд на языке bash
* source - команда, позволяющая выполнить сценарий так, как будто мы напечатали его команду за командой, в текущем процессе bash
* фоновый процесс - в bash можно запустить процесс в фоновом режиме. При этом он продолжит печатать свои сообщения на экране, но не будет читать команды с клавиатуры. Если ему понадобятся какие-то данные от пользователя, то он просто остановится и будет ждать. Можно сделать фоновый процесс основным, подключив его к клавиатуре, и можно сделать основной процесс фоновым. 

Команды в скриптах bash
------------
ВНИМАНИЕ! Чтобы работа с bash не слишком разочаровывала, ВСЕГДА используйте в скриптах `set -e` или `set -xe`. 

Для программирования в bash есть следующие команды (которые можно запускать и в диалоговом режиме)
* установка и чтение переменных 
* печать (echo)
* вызов программ
* циклы
* передача управления (exit и т.п.)
* проверка существования файлов
* операции над строками (конкатенация и сравнение)
* чтение данных из командной строки
* логические операции (и, или, не)

Учебные материалы
=================
Пока не готово (найдите сами)

Что нужно знать
===============
* Уметь пользоваться bash в терминале (например, lxterminal)
* уметь прокручивать историю за пределы экрана без мыши (если ваш терминал это поддерживает, но для lxterminal нужно уметь)
* знать, что такое перенаправление потоков и уметь его применять в bash
* уметь применять команды, перечисленные в пункте [#Команды в скриптах bash](#Команды-в-скриптах-bash)





